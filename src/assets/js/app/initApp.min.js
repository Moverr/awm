
var storageVersion=9;var tenantId=window.location.pathname.split("/")[1];var currencyCode=localStorage.currencyCode||"UNKNOWN";var doHistoryUpdate=true;var eventtype=Object.freeze({CREATE:"create",UPDATE:"update",DELTE:"delete",UNCHANGED:"unchanged"});var clientList=new ClientList();var groupList=new GroupList();var officerList=new OfficerList();var loanList=new LoanList();var savingsAccountList=new SavingsAccountList();var accountList=new AccountList();var shareList=new ShareList();var handlers={Loan:new LoanHandler(),SavingsAccount:new SavingsAccountHandler(),Client:new ClientHandler(),Communication:new CommunicationHandler(),Reporting:new ReportingHandler(),Accounting:new AccountingHandler(),Options:new Options(),Management:new ManagementHandler(),ActionRequired:new ActionRequiredHandler(),Dashboard:new DashboardHandler(),Share:new ShareHandler()};var host=window.location.origin;host=window.location.protocol+"//tpe.awamo360.com";var username=null;var authentication=null;var user=null;var currentTable="none";var tenant={name:"awamo MFI ltd.",manager:{id:8,username:"cockpituser1",firstname:"Dirk",lastname:"Podolak",fullname:"Podolak, Dirk",phone1:"+49-123-4567890",email:"podolak@awamo.com"}};var BIT_MASK_DAY=1;var BIT_MASK_WEEK=2;var BIT_MASK_MONTH=4;var BIT_MASK_YEAR=8;function getAuthenticationHeader(){return{tenantId:tenantId,authentication:authentication}}function ajax(b,c,a,d,g,f,e){if(typeof(g)==="undefined"){g=getAuthenticationHeader()}if(typeof(f)==="undefined"){f=function(h){console.log("fail");console.log(h)}}$.ajax({url:host+b,type:c,data:d,headers:g,dataType:"json",contentType:"application/json; charset=utf-8"}).done(a).fail(f).always(e)}function initApp(){window.onpopstate=function(a){if(a.state!==null){doHistoryUpdate=false;$(a.state.selector).click()}};String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};if(!String.prototype.startsWith){String.prototype.startsWith=function(b,a){a=a||0;return this.substr(a,b.length)===b}}if(!String.prototype.endsWith){String.prototype.endsWith=function(c,b){var a=this.toString();if(typeof b!=="number"||!isFinite(b)||Math.floor(b)!==b||b>a.length){b=a.length}b-=c.length;var d=a.indexOf(c,b);return d!==-1&&d===b}}if(!Array.prototype.includes){Array.prototype.includes=function(d){var e=Object(this);var a=parseInt(e.length)||0;if(a===0){return false}var f=parseInt(arguments[1])||0;var b;if(f>=0){b=f}else{b=a+f;if(b<0){b=0}}var c;while(b<a){c=e[b];if(d===c||(d!==d&&c!==c)){return true}b++}return false}}if(!Array.prototype.remove){Array.prototype.remove=function(b){var a=this.indexOf(b);if(a>=0){return this.splice(a,1)}return false}}if(!Array.prototype.isArray){Array.prototype.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"}}if(!Array.prototype.sum){Array.prototype.sum=function(){for(var b=0,a=this.length;a--;b+=this[a]){}return b}}if(!String.prototype.replaceAll){String.prototype.replaceAll=function(a,c){var d=this;var b=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return d.replace(new RegExp(b,"g"),c)}}$.tablesorter.addParser({id:"awamoDateSorter",is:function(b,c,a,d){return false},format:function(c,d,a,b){if(c.trim().length===0){return -Number.MAX_VALUE}return unformatDate(c).getTime()},type:"numeric"});$.tablesorter.addParser({id:"awamoPercentageSorter",is:function(b,c,a,d){return false},format:function(c,d,a,b){return unformatPercentage(c)/1000},type:"numeric"});$.tablesorter.addParser({id:"awamoCurrencySorter",is:function(b,c,a,d){return false},format:function(c,d,a,b){return unformatCurrency(c)/100},type:"numeric"});$.tablesorter.addParser({id:"awamoLoanHealthSorter",is:function(b,c,a,d){return false},format:function(c,d,a,b){return c.toUpperCase().replace(/PAR_0/,6).replace(/PAR_3/,5).replace(/PAR_30/,4).replace(/PAR_60/,3).replace(/PAR_90/,2).replace(/DEFAULTED/,1).replace(/WRITTEN_OFF/,0)},type:"numeric"})}function initLocalStorage(){if(typeof(Storage)!=="undefined"){var a=localStorage.getItem("storageVersion");if(!exists(a)||a<storageVersion){localStorage.clear();localStorage.setItem("storageVersion",storageVersion)}}else{}}function initLogin(){$("#loginForm").submit(handlers.Communication.loginFormSubmitHandler);$(".forgotPasswordLink a").on("click touch",function(){$("#actionValue").val("forgotPassword");$("#loginRow input").removeAttr("required");$("#forgotPasswordRow input").attr("required","required");$("#loginRow").hide();$("#forgotPasswordRow").show();$(".message").hide()});$(".backToLoginLink a").on("click touch",function(){$("#actionValue").val("login");$("#loginRow input").attr("required","required");$("#forgotPasswordRow input").removeAttr("required");$("#loginRow").show();$("#forgotPasswordRow").hide();$(".message").hide()});statusbar("waiting for user login")}$(document).ready(function(){initApp();initLocalStorage();initLogin();$("#login").show()});